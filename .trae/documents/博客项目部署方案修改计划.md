# 博客项目代码修改计划

## 1. 修改目标

按照部署方案的要求修改代码，移除Redis依赖，将MongoDB替换为SQLite，确保摄影相册功能正常工作，为后续部署做好准备。

## 2. 详细修改步骤

### 2.1 移除Redis依赖
1. **修改`pom.xml`文件**：删除Redis相关依赖
2. **删除Redis配置**：移除所有Redis配置文件和相关代码
3. **检查代码**：确保没有使用Redis的地方

### 2.2 将MongoDB替换为SQLite
1. **修改`pom.xml`文件**：
   - 移除MongoDB依赖
   - 添加SQLite依赖
   - 添加JPA依赖

2. **修改数据模型类**：
   - 将`@Document`注解替换为`@Entity`和`@Table`
   - 为每个模型添加`@Id`和`@GeneratedValue`注解
   - 将MongoDB特定的注解替换为JPA注解

3. **创建配置文件**：
   - 创建`application-prod.properties`文件
   - 配置SQLite数据库连接
   - 配置JPA设置

### 2.3 确保摄影相册功能正常
1. **检查`FileController.java`**：确保上传目录配置正确
2. **验证文件上传功能**：确保文件能正确上传到本地目录
3. **验证文件列表功能**：确保能正确获取上传的文件列表
4. **检查Nginx配置模板**：确保包含`/uploads`路由代理配置

## 3. 摄影相册功能保留

摄影相册功能可以直接在该部署方案下运行，无需切换回模拟相册，原因如下：
- 功能不依赖MongoDB或Redis
- 文件存储在本地，符合部署方案要求
- 资源消耗少，适合轻量级VPS
- 成本在预算范围内

## 4. 预期效果

- 代码修改完成，移除了Redis和MongoDB依赖
- 替换为SQLite数据库，适合轻量级部署
- 所有功能（包括摄影相册）正常运行
- 为后续VPS部署做好准备

## 5. 注意事项

- 保留原始代码备份
- 测试所有功能是否正常
- 确保SQLite配置正确
- 检查上传目录权限设置